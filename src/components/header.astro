---
import { MailIcon, LinkedinIcon, GithubIcon, MapPinIcon, RssIcon } from '@lucide/astro';
---

<header id="page-header" class="mb-16">
  <img src="/gyen.jpeg" alt="Gyen Abubakar Sadick" class="mb-6 size-24 rounded-full grayscale" />

  <h1 class="mb-2 text-4xl font-bold">Gyen Abubakar Sadick</h1>
  <p class="mb-1 text-xl">Software Developer</p>

  <div
    class="flex flex-wrap gap-4 text-sm [&>a]:flex [&>a]:items-center [&>a]:gap-1.5 [&>a]:hover:underline [&>a]:dark:hover:text-neutral-300"
  >
    <a href="mailto:gyenabubakar@gmail.com" target="_blank" rel="noopener noreferrer">
      <MailIcon size={16} />
      gyenabubakar@gmail.com
    </a>

    <a href="https://linkedin.com/in/GyenAbubakar" target="_blank" rel="noopener noreferrer">
      <LinkedinIcon size={16} />
      LinkedIn
    </a>

    <a href="https://github.com/gyenabubakar" target="_blank" rel="noopener noreferrer">
      <GithubIcon size={16} />
      GitHub
    </a>

    <a href="https://blog.gyen.dev" target="_blank" rel="noopener noreferrer">
      <RssIcon size={16} />
      Blog
    </a>
  </div>

  <p class="mt-4 flex items-center gap-1 text-sm text-neutral-500 dark:text-neutral-500">
    <MapPinIcon size={14} />
    Accra, Ghana â€” West Africa (UTC)
  </p>
</header>

<nav
  id="sticky-nav"
  class="pointer-events-none fixed top-6 left-1/2 z-50 w-full max-w-[calc(100%-3rem)] opacity-0"
  style="transform: translate(-50%, 0) scale(1.05); max-width: min(42rem, calc(100% - 3rem));"
  aria-hidden="true"
>
  <div
    class="flex items-center justify-between gap-8 rounded-full border border-black bg-white/80 px-6 py-3 shadow-lg backdrop-blur-md dark:border-white dark:bg-black/80"
  >
    <div class="flex items-center gap-3">
      <img src="/gyen.jpeg" alt="Gyen Abubakar Sadick" class="size-10 rounded-full grayscale" />
      <span class="hidden font-bold sm:block">Gyen Abubakar</span>
    </div>

    <div
      class="flex items-center gap-2 [&>a]:flex [&>a]:size-8 [&>a]:items-center [&>a]:justify-center [&>a]:rounded-full [&>a]:border [&>a]:border-black [&>a]:hover:bg-black [&>a]:hover:text-white [&>a]:dark:border-white [&>a]:dark:hover:bg-white [&>a]:dark:hover:text-black"
    >
      <a href="mailto:gyenabubakar@gmail.com" aria-label="Email">
        <MailIcon size={16} />
      </a>

      <a
        href="https://linkedin.com/in/GyenAbubakar"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="LinkedIn"
      >
        <LinkedinIcon size={16} />
      </a>

      <a
        href="https://github.com/gyenabubakar"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="GitHub"
      >
        <GithubIcon size={16} />
      </a>
    </div>
  </div>
</nav>

<script>
  const header = document.getElementById('page-header')!;
  const nav = document.getElementById('sticky-nav')! as HTMLElement;

  let ticking = false;

  nav.style.transition =
    'opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';

  function updateNav() {
    const headerRect = header.getBoundingClientRect();
    const isHeaderVisible = headerRect.bottom > 100;

    if (!isHeaderVisible) {
      nav.style.opacity = '1';
      nav.style.pointerEvents = 'auto';
      nav.style.transform = 'translate(-50%, 0) scale(1)';
      nav.setAttribute('aria-hidden', 'false');
    } else {
      nav.style.opacity = '0';
      nav.style.pointerEvents = 'none';
      nav.style.transform = 'translate(-50%, 0) scale(1.05)';
      nav.setAttribute('aria-hidden', 'true');
    }

    ticking = false;
  }

  function onScroll() {
    if (!ticking) {
      window.requestAnimationFrame(updateNav);
      ticking = true;
    }
  }

  window.addEventListener('scroll', onScroll, { passive: true });
  updateNav();
</script>
