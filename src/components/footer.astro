---
import { SunIcon, MoonIcon } from '@lucide/astro';

const currentYear = new Date().getFullYear();
---

<footer class="border-t border-black pt-8 text-sm dark:border-white">
  <div class="flex items-center justify-between">
    <p>&copy; {currentYear} Gyen Abubakar Sadick</p>

    <button
      id="theme-toggle"
      class="flex size-8 items-center justify-center rounded-full border border-black hover:bg-black hover:text-white dark:border-white dark:hover:bg-white dark:hover:text-black"
      aria-label="Toggle theme"
    >
      <SunIcon size={16} class="sun-icon" />
      <MoonIcon size={16} class="moon-icon hidden" />
    </button>
  </div>
</footer>

<script>
  const toggle = document.getElementById('theme-toggle')!;
  const sunIcon = toggle.querySelector('.sun-icon')! as HTMLElement;
  const moonIcon = toggle.querySelector('.moon-icon')! as HTMLElement;

  function updateIcons() {
    const isDark = document.documentElement.classList.contains('dark');
    sunIcon.classList.toggle('hidden', isDark);
    moonIcon.classList.toggle('hidden', !isDark);
  }

  updateIcons();

  toggle.addEventListener('click', () => {
    const isDark = document.documentElement.classList.contains('dark');
    document.documentElement.classList.toggle('dark', !isDark);
    localStorage.setItem('theme', !isDark ? 'dark' : 'light');
    updateIcons();
  });
</script>
